---
layout: document
title: Azure Notes
description: General azure notes. This document will eventually evolve and branch out to multiple documents.
modified: 2016-05-03 23:59:00
relativeroot: ../../
permalink: documents/azure
type: document
tags:
- Azure
- Cloud
category: documents
published: true
hidden: true
---

Dump
=====

EventHub
- http://stackoverflow.com/questions/36727808/any-example-of-webjob-using-eventhub
Singleton
 - https://blogs.msdn.microsoft.com/waws/2014/05/19/how-to-run-a-continuous-webjob-as-a-singleton/
 - add the file to root (project root, set Copy to Output Directory property to Copy if newer)
Webjobs API: https://github.com/projectkudu/kudu/wiki/WebJobs-API
Shutting down
 - http://blog.amitapple.com/post/2014/05/webjobs-graceful-shutdown/#.VynX34SLQ-U
 - https://github.com/projectkudu/kudu/wiki/Web-Jobs
 - http://stackoverflow.com/questions/27770547/notification-of-when-continuous-azure-webjob-is-stopping-for-noautomatictrigger
 - http://stackoverflow.com/questions/35166010/azure-triggered-webjob-detecting-when-webjob-stops
 - http://stackoverflow.com/questions/36727808/any-example-of-webjob-using-eventhub
 - http://stackoverflow.com/questions/35166010/azure-triggered-webjob-detecting-when-webjob-stops
 - http://stackoverflow.com/questions/27770547/notification-of-when-continuous-azure-webjob-is-stopping-for-noautomatictrigger
Continuous/Timers
 - http://stackoverflow.com/questions/29625813/how-to-make-azure-webjob-run-continuously-and-call-the-public-static-function-wi
Timers (config, bug in old ver): http://stackoverflow.com/questions/34665763/azure-webjobs-timertrigger-not-triggering
Timer Samples
 - https://github.com/Azure/azure-webjobs-sdk-extensions/blob/master/src/ExtensionsSample/Samples/TimerSamples.cs
Queues, listen to poison messages: https://github.com/victorhurdugaci/AzureWebJobsSamples/tree/master/SendEmailOnFailure

General
- https://github.com/projectkudu/kudu/wiki/Web-Jobs
- https://azure.microsoft.com/en-us/documentation/articles/web-sites-create-web-jobs/
- https://azure.microsoft.com/en-us/documentation/articles/websites-dotnet-webjobs-sdk/

http://fabriccontroller.net/iot-with-azure-service-bus-event-hubs-authenticating-and-sending-from-any-type-of-device-net-and-js-samples/

Event hubs & webjobs https://github.com/Azure/azure-webjobs-sdk/wiki/EventHub-support
Service Bus & web jobs https://azure.microsoft.com/en-us/documentation/articles/websites-dotnet-webjobs-sdk-service-bus/

Architecture
===========

Web and worker roles effectively deprecated -> use web apps (websites) and web jobs.

New features
----------------------------

- Functions [overview](https://azure.microsoft.com/en-us/documentation/articles/functions-overview/).
- Container Service [landing page](https://azure.microsoft.com/en-us/services/container-service/).

Web Apps
=======

- Configuring [docs](https://azure.microsoft.com/en-us/documentation/articles/web-sites-configure/)
- Getting 403 errors? Perhaps the App Service Plan resource quota is exceeded: try scaling up the service plan [reference](https://blogs.msdn.microsoft.com/waws/2016/01/05/azure-web-apps-error-403-this-web-app-is-stopped/).
  - Free tier has a resource quota TODO defined where? What about quotas for other tiers?

WebJobs
=======

Continuous, scheduled or on-demand (run from the portal).

Continous jobs require that the web app hosting the job is configured with the "Always On" option (requires basic tier+), otherwise the job may be terminated when the app becomes idle [reference](https://azure.microsoft.com/en-us/documentation/articles/web-sites-configure/)

TODO Use cases: when to and when not to, alternatives


Dashboard
------------

Access at https://yoursite.scm.azurewebsites.net/azurejobs

Scheduled WebJobs
----------------------

Minimum frequency - each minute - is not free. Other frequencies are free (hours, days etc.) [reference](https://azure.microsoft.com/en-us/documentation/articles/websites-dotnet-deploy-webjobs/).

Links
------

- Hanselman hype [blog post](http://www.hanselman.com/blog/IntroducingWindowsAzureWebJobs.aspx).
- Creating a webjob [article](https://azure.microsoft.com/en-us/documentation/articles/websites-dotnet-webjobs-sdk-get-started/).
- WebJobs for queue storage [article](https://azure.microsoft.com/en-us/documentation/articles/websites-dotnet-webjobs-sdk-storage-queues-how-to/).
- Deployment (with or without a web app) [reference](https://azure.microsoft.com/en-us/documentation/articles/websites-dotnet-deploy-webjobs/).
- To enable webjobs dashboard when deployed alongside another web app, you need to put the AzureWebJobsDashboard connectionstring in the web app configuration through azure portal [reference](http://stackoverflow.com/questions/34124804/azurewebjobsdashboard-configuration-error).
- Web job published alongside another web app gets configuration settings also from the web app's configuration settings (web.config or overridden from the portal) [reference](http://blog.ploeh.dk/2014/05/16/configuring-azure-web-jobs/).
- Single Writer [reference](http://blog.ploeh.dk/2014/04/30/single-writer-web-jobs-on-azure/).
- Scheduled continuous polling [reference](http://blog.ploeh.dk/2014/09/25/faking-a-continuously-polling-consumer-with-scheduled-tasks/).

Security
======

Vulnerability scanning [blog post](https://azure.microsoft.com/en-us/blog/web-vulnerability-scanning-for-azure-app-service-powered-by-tinfoil-security/).

Docker
=====

Deploy an ASP.NET container [article](https://azure.microsoft.com/en-us/documentation/articles/vs-azure-tools-docker-hosting-web-apps-in-docker/).
